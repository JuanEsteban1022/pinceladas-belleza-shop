<section class="page producto-detalle" *ngIf="!loading && !error && producto">
    <div class="producto-detalle__container">
        <div class="producto-detalle__image">
            <p-galleria [value]="getImagenes()" [showThumbnails]="true" [showIndicators]="true">
                <ng-template pTemplate="item" let-item>
                    <img [src]="item" style="width: 100%; height: 400px; object-fit: cover; border-radius: 8px;" />
                </ng-template>
                <ng-template pTemplate="thumbnail" let-item>
                    <img [src]="item" style="width: 80px; height: 60px; object-fit: cover; border-radius: 4px;" />
                </ng-template>
            </p-galleria>
        </div>

        <div class="producto-detalle__info">
            <h1 class="producto-detalle__name">{{ producto.nombre }}</h1>
            <div class="producto-detalle__description" [innerHTML]="producto.descripcion | safeHtml"></div>
            <p class="producto-detalle__price">
                {{ producto.precio | currency:'COP':'symbol':'1.0-0' }}
            </p>
            <p class="producto-detalle__stock">
                Unidades disponibles: {{ producto.cantidadStock }} unidades
            </p>

            <div class="producto-detalle__actions">
                <input type="number" class="producto-detalle__quantity" [(ngModel)]="cantidad" min="1"
                    max="{{ producto.cantidadStock || 99 }}" value="1" />
                <button class="producto-detalle__button" (click)="addToCart(producto)">
                    <i class="pi pi-shopping-cart mr-1"></i>
                    AÃ±adir al carrito
                </button>
            </div>
        </div>
    </div>
</section>

<p *ngIf="loading" class="page__loading">Cargando producto...</p>
<p *ngIf="error" class="page__error">{{ error }}</p>